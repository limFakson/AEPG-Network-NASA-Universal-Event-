generator client {
  provider = "prisma-client-py"
  recursive_type_depth = 5
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
}

model MapFires {
  id  Int   @id @default(autoincrement())
  latitude Float
  longitude Float
  confidence  Float
  confidence_lvl  String  @db.Char(1)
  satellite String
  acq_datetime  DateTime
  daynight  String    @db.Char(1)
  geom_wkt  String
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt

  // Reverse relation
  weather         WeatherObservation[]
}

model WeatherObservation {
  id         Int       @id @default(autoincrement())
  fire_id    Int
  obs_time   DateTime   @db.Timestamptz(6)  // observation time (UTC)
  parameter  String     @db.VarChar(64)     // e.g., T2M, WS2M
  value      Float?
  units      String?    @db.VarChar(16)
  source     String     @default("NASA_POWER") @db.VarChar(64)

  // Relation to MapFires
  fire       MapFires  @relation(fields: [fire_id], references: [id], onDelete: Cascade)

  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
}